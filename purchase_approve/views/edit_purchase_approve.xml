<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="view_add_purchase_approve_form" model="ir.ui.view">
            <field name="name">view.add.purchase.approve.form</field>
            <field name="model">purchase.order</field>
            <field name="inherit_id" ref="purchase.purchase_order_form"/>
            <field name="arch" type="xml">
                <data>
                    <xpath expr="/form/header" position="inside">
                        <button name="button_confirmconfirm" string="Confirm" class="oe_highlight"
                                type="object" attrs="{'invisible':[('state', '!=', 'sent')]}"
                                groups="purchase.group_purchase_user"/>
                        <button name="button_leaderapprove" string="LeaderTeam Approve" class="oe_highlight"
                                type="object" attrs="{'invisible':[('state', '!=', 'confirm')]}"
                                groups='purchase_approve.group_purchase_leader'/>
                        <button name="button_manegerapprove" string="Maneger Approve" class="oe_highlight"
                                type="object" attrs="{'invisible':[('state', '!=', 'leader_approved')]}"
                                groups="purchase.group_purchase_manager"/>
                    </xpath>
                    <xpath expr="//form/header/button[@id='draft_confirm']" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </xpath>
                    <xpath expr="//form/header/button[@id='bid_confirm']" position="attributes">
                        <attribute name="states">maneger_approved</attribute>
                    </xpath>
                    <xpath expr="//field[@name='state']" position="replace">
                        <field name="state" widget="statusbar"
                               statusbar_visible="draft,sent,confirm,leader_approved,maneger_approved,purchase"/>
                    </xpath>
                         <xpath expr="/form/sheet/group[1]/group[1]" position="inside">
                <field name="check_sample"  widget='radio' attrs="{'readonly': [('state', '!=', 'draft')]}" options="{'horizontal': true}" />
                <field name="mfo"  invisible="1"/>
                <field name="name_update"  invisible="1"/>
        </xpath>
                    <xpath expr="/form/sheet/notebook/page[@name='products']" position="after">
                        <page name="notes" string="notes"/>
                    </xpath>
                    <xpath expr="//field[@name='name']" position="replace">
                            <field name="name" attrs="{'readonly': [('name_update', '=', False)]}" />
                    </xpath>
                      <xpath expr="//button[@name='action_rfq_send']" position="before">
                            <button name="button_confirm" type="object" states="draft,sent" attrs="{'invisible': ['|',('mfo', '=', False),('state', 'not in', ('sent','draft'))]}"  groups="purchase_approve.group_mfo_user" string="Confirm"/>
                        </xpath>
                    <xpath expr="/form/sheet/notebook/page[@name='notes']" position="inside">
                        <group>
                            <field name="approver_id"/>
                            <field name="approverrr_id"/>
                            <field name="note" widget="section_and_note_text"/>
                        </group>
                    </xpath>
                </data>
            </field>
        </record>
    </data>
</odoo>
